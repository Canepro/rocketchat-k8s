# Rocket.Chat Uploads PersistentVolumeClaim
# This PVC provides persistent storage for Rocket.Chat file uploads (images, files, etc.).
# Rocket.Chat Helm chart binds this PVC to the Rocket.Chat deployment for upload persistence.
# See VERSIONS.md for Rocket.Chat version tracking (managed by Helm chart via ArgoCD).
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: rocketchat-uploads  # PVC name (referenced by Rocket.Chat Helm chart in values.yaml)
  namespace: rocketchat  # Namespace for Rocket.Chat deployment
spec:
  accessModes:
    - ReadWriteOnce  # Single node read/write (Rocket.Chat uses one replica)
  resources:
    requests:
      storage: 5Gi  # Storage size (adjust based on upload volume requirements)
  # AKS Migration: Changed from local-storage to managed-premium (Azure Disk)
  # StorageClass: Azure managed-premium StorageClass (dynamically provisions Azure Premium SSD)
  # This replaces the old local-path StorageClass from k3s cluster
  storageClassName: managed-premium  # Azure managed-premium StorageClass (standard AKS StorageClass)

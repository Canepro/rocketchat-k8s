# Traefik Helm values for AKS
# Chart: traefik/traefik

# Create IngressClass with name "traefik" (matches values.yaml ingressClassName)
ingressClass:
  enabled: true
  isDefaultClass: true

# Service configuration - Azure LoadBalancer
service:
  enabled: true
  type: LoadBalancer
  annotations:
    # Azure-specific annotations if needed
    # service.beta.kubernetes.io/azure-load-balancer-resource-group: "your-rg"

# Entry points configuration
ports:
  web:
    port: 8000
    expose:
      default: true
    exposedPort: 80
    protocol: TCP
    # NOTE: Do NOT redirect HTTP->HTTPS until the first cert is issued.
    # HTTP-01 validation happens over plain HTTP (port 80); global redirect can cause
    # ACME to hit HTTPS before a valid cert exists and fail the order.
  websecure:
    port: 8443
    expose:
      default: true
    exposedPort: 443
    protocol: TCP
    tls:
      enabled: true

# Enable dashboard (optional, for debugging)
ingressRoute:
  dashboard:
    enabled: false

# Logging
logs:
  general:
    level: INFO
  access:
    enabled: true

# Resource limits
resources:
  requests:
    cpu: "100m"
    memory: "50Mi"
  limits:
    cpu: "300m"
    memory: "150Mi"

# Prometheus metrics
metrics:
  prometheus:
    entryPoint: metrics
    addEntryPointsLabels: true
    addServicesLabels: true

# Providers - enable Kubernetes Ingress
providers:
  kubernetesIngress:
    enabled: true
    publishedService:
      enabled: true

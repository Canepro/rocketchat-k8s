# Example Terraform variables file
# Copy this to terraform.tfvars and update with your values
# terraform.tfvars is gitignored and should not be committed

# Resource Group
resource_group_name = "rg-canepro-aks"
location            = "uksouth"

# AKS Cluster
cluster_name        = "aks-canepro"
dns_prefix          = "aks-canepro"
node_count          = 2
vm_size             = "Standard_D4as_v5"  # 4 vCPU, 16GB RAM - recommended for RocketChat + Jenkins + Observability (Loki, traces, metrics)

# Kubernetes version (leave empty for latest)
# kubernetes_version = "1.28.0"

# Auto-shutdown for cost optimization
# Cluster stops at shutdown_time, starts at startup_time on weekdays only
# Stays OFF all weekend (Friday evening -> Monday morning)
# Evening-only schedule: 16:00-23:00 (7 hours/day) saves ~£75-88/month vs 08:30-23:00
# If cluster needed urgently during day, manually start: az aks start -g rg-canepro-aks -n aks-canepro
enable_auto_shutdown = true
shutdown_timezone    = "Europe/London"      # UK timezone (IANA format required by Azure Automation)
shutdown_time        = "23:00"              # 11 PM stop
startup_time         = "16:00"              # 4 PM start (evening-only schedule for maximum cost savings)

# Phase 4: Jenkins graceful disconnect (optional)
# Before stopping AKS, the stop runbook disables the Jenkins aks-agent node so builds don't get stuck.
# Create Automation Variable 'JenkinsAksAgentDisconnectToken' in Azure (Jenkins API token) — never put token in tfvars.
# jenkins_graceful_disconnect_url  = "https://jenkins-oke.canepro.me"
# jenkins_graceful_disconnect_user = "admin"
# jenkins_graceful_disconnect_agent_name = "aks-agent"

# Tags
tags = {
  Environment = "production"
  ManagedBy   = "Terraform"
}

# Key Vault network access (optional)
# key_vault_network_default_action = "Allow"
# key_vault_network_ip_rules = ["203.0.113.10/32"] # Example: your public IP (optional)
# key_vault_purge_protection = true # Optional; makes destroy/recreate harder

# Key Vault Secret Values (SENSITIVE - DO NOT COMMIT THIS FILE)
# Copy this file to terraform.tfvars and fill in actual values
# terraform.tfvars is gitignored and should never be committed

# MongoDB connection strings (replace with your actual values)
rocketchat_mongo_uri = "mongodb://rocketchat:PASSWORD@mongodb-0.mongodb-svc.rocketchat.svc.cluster.local:27017/rocketchat?authSource=rocketchat&replicaSet=mongodb"
rocketchat_mongo_oplog_uri = "mongodb://admin:PASSWORD@mongodb-0.mongodb-svc.rocketchat.svc.cluster.local:27017/local?authSource=admin&replicaSet=mongodb"

# MongoDB passwords (replace with your actual values)
mongodb_admin_password = "CHANGE_ME"
mongodb_rocketchat_password = "CHANGE_ME"
mongodb_metrics_endpoint_password = "CHANGE_ME"

# Observability credentials (replace with your actual Grafana/Mimir/Tempo/Loki credentials)
# Used by Prometheus Agent, OTel Collector, and Promtail for authenticating to observability hub
observability_username = "CHANGE_ME"  # Grafana username or instance ID
observability_password = "CHANGE_ME"  # Grafana API key or password

# Jenkins credentials (replace with your actual values)
# Used by Jenkins controller for admin authentication and GitHub integration
jenkins_admin_username = "admin"                      # Jenkins admin username (default: admin)
jenkins_admin_password = "CHANGE_ME_STRONG_PASSWORD"  # Jenkins admin password (use a strong password)
jenkins_github_token = "ghp_CHANGE_ME"                # GitHub Personal Access Token (scopes: repo, admin:repo_hook)
